/*!
 * Chart.BarFunnel.js
 * http://chartjs.org/
 * Version: 0.1.0
 *
 * Copyright 2016 Jorge Conde
 * Released under the MIT license
 * https://github.com/chartjs/Chart.BarFunnel.js/blob/master/LICENSE.md
 */
!function e(r,t,o){function a(i,n){if(!t[i]){if(!r[i]){var d="function"==typeof require&&require;if(!n&&d)return d(i,!0);if(l)return l(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var b=t[i]={exports:{}};r[i][0].call(b.exports,function(e){var t=r[i][1][e];return a(t?t:e)},b,b.exports,e,r,t,o)}return t[i].exports}for(var l="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(e,r,t){(function(e){var r=e.helpers;e.defaults.barFunnel={hover:{mode:"label"},region:{display:!0,borderColor:"#F6C85F",backgroundColor:"rgba(246, 200, 95, 0.2)"},elements:{rectangle:{stepLabel:{display:!0,fontSize:20}}},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.7,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},e.controllers.barFunnel=e.controllers.bar.extend({updateElement:function(e,t,o,a){var l,i=this.getMeta(),n=this.getScaleForId(i.xAxisID),d=this.getScaleForId(i.yAxisID);l=d.min<0&&d.max<0?d.getPixelForValue(d.max):d.min>0&&d.max>0?d.getPixelForValue(d.min):d.getPixelForValue(0);var s=this.chart.options,b=this.chart.options.elements.rectangle,p=e.custom||{},c=this.getDataset();r.extend(e,{_chart:this.chart.chart,_xScale:n,_yScale:d,_datasetIndex:this.index,_index:t,_model:{x:this.calculateBarX(t,this.index),y:o?l:this.calculateBarY(t,this.index),label:this.chart.data.labels[t],datasetLabel:c.label,base:o?l:this.calculateBarBase(this.index,t),width:this.calculateBarWidth(t),backgroundColor:p.backgroundColor?p.backgroundColor:r.getValueAtIndexOrDefault(c.backgroundColor,t,b.backgroundColor),borderSkipped:p.borderSkipped?p.borderSkipped:b.borderSkipped,borderColor:p.borderColor?p.borderColor:r.getValueAtIndexOrDefault(c.borderColor,t,b.borderColor),borderWidth:p.borderWidth?p.borderWidth:r.getValueAtIndexOrDefault(c.borderWidth,t,b.borderWidth),stepLabelColor:b.stepLabel.color?b.stepLabel.color:r.getValueAtIndexOrDefault(c.borderColor,t,b.borderColor),stepLabelFontSize:b.stepLabel.fontSize?b.stepLabel.fontSize:s.defaultFontSize},draw:function(){function e(e){return u[(x+e)%4]}var r=this._chart.ctx,o=this._view,a=this._chart.config.options,l=o.width/2,n=o.x-l,d=o.x+l,p=o.base-(o.base-o.y),h=o.borderWidth/2;o.borderWidth&&(n+=h,d-=h,p+=h),r.beginPath(),r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth;var u=[[n,o.base],[n,p],[d,p],[d,o.base]],f=["bottom","left","top","right"],x=f.indexOf(o.borderSkipped,0);x===-1&&(x=0),r.moveTo.apply(r,e(0));for(var g=1;g<4;g++)r.lineTo.apply(r,e(g));if(r.fill(),o.borderWidth&&r.stroke(),b.stepLabel.display&&0!=t){var y=c.data[t]/c.data[0]*100;c.data[t]>0&&(r.font=o.stepLabelFontSize+"px "+a.defaultFontFamily,r.fillStyle=o.stepLabelColor,r.textAlign="center",r.fillText(y.toFixed(0)+"%",o.x,o.y-o.stepLabelFontSize))}if(s.region.display&&t<i.data.length-1){var C=i.data[t+1]._view,S=[[o.x+l,p],[C.x-l,C.base-(C.base-C.y-1)],[C.x-l,C.base],[o.x+l,o.base]];r.beginPath(),r.strokeStyle=s.region.borderColor,r.moveTo.apply(r,S[0]),r.lineTo.apply(r,S[1]),r.stroke(),r.beginPath(),r.strokeStyle="transparent",r.fillStyle=s.region.backgroundColor,r.moveTo.apply(r,S[1]),r.lineTo.apply(r,S[2]),r.lineTo.apply(r,S[3]),r.lineTo.apply(r,S[0]),r.fill(),r.stroke()}}}),e.pivot()}})}).call(this,Chart)},{}]},{},[1]);
